<html>

<head>
<title>Sensor Mangagement</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap-theme.min.css">
</head>

<body>
	<div class='container'>
	<button name='homeBtn'> <a href="MainPage.php"> Home </a></button>

	<h1> Sensors Module </h1>
	<br>
	<br>

		<?php 
	    function get_sensors($conn, $person_id){
	        $arr = array();
	        $sql = 'SELECT s.* FROM sensors s';
	        $stid = oci_parse($conn,$sql);
	        $res = oci_execute($stid);
	        
	        if (!$res) {
		        $err = oci_error($stid);
		        echo htmlentities($err['message']);
            }
	        
	        while ($row = oci_fetch_array($stid, OCI_ASSOC)) {
		        array_push($arr,$row);
	        }
	        oci_free_statement($stid);
	        return $arr;
	    }

	   	include ("PHPconnectionDB.php");
	   	$conn=connect();
	   	$person_id = 3;
	   	$rows = get_sensors($conn, $person_id);
	   	oci_close($conn);
	?>
	<table class="table">
		<thead>
			<tr>
			<th>SensorID</th>
			<th>Location</th>
			<th>Sensor Type</th>
			<th>Description</th>
			</tr>
		</thead>

		<?php foreach($rows as $row) { ?>
			<tr>
				<td> <?php echo $row; ?> </td>
				<td> <?php echo $row; ?> </td>
				<td> <?php echo $row; ?> </td>
				<td> <?php echo $row; ?> </td>
			</tr>
		<?php }; ?>

	</table>

		

	<br>
	<br>
	<legend> Create Sensor </legend>
		<form name="createSensor" class="form-group" method="post" action="sensorModule.php">
			<label for="sensorLocation">Sensor Location</label>
			<input type='text' name='sensor_location' class="form-control" placeholder="Sensor Location"><br>
			<label for="sensorType">Sensor Type</label> 
			<select name='sensor_type' class='form-control'>
					<option disabled selected> --- Select a type --- </option>
					<option value="a">Audio (a) </option>
					<option value="i">Image (i) </option>
					<option value="t">Temperature (t) </option>
					<option value="o">Other(o) </option>
				</select> <br>
			<label for="sensor_description">Description</label><br>
			<input type='text' name='sensor_description' class='form-control' placeholder='Sensor Description'> <br>
			<button type='submit' name='createSensorBtn' class="btn btn-default">Add Sensor</button>
		</form>

		<br><br><br><br><br><br>

		<legend> Remove Sensor </legend>
		<form name="removeSensor" class="form-group" method="post" action="sensorModule.php">
				Sensor ID : <input type='text' name='sensor_id' class="form-control"> <br>
				<button type='submit' name='removeSensorBtn' class="btn btn-default">Remove</button>
		</form>
	</div>
</body>

</html>